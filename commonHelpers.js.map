{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport izitoast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nclass UserTimer {\n  static #second = 1000;\n  static #minute = UserTimer.#second * 60;\n  static #hour = UserTimer.#minute * 60;\n  static #day = UserTimer.#hour * 24;\n  #intervalID = null;\n\n  constructor(ms) {\n    this.days = ms.getDate() || 0;\n    this.hours = ms.getHours() || 0;\n    this.minutes = ms.getMinutes() || 0;\n    this.seconds = ms.getSeconds() || 0;\n  }\n\n  #convertMs(ms) {\n    const days = Math.floor(ms / UserTimer.#day);\n    const hours = Math.floor((ms % UserTimer.#day) / UserTimer.#hour);\n    const minutes = Math.floor(\n      ((ms % UserTimer.#day) % UserTimer.#hour) / UserTimer.#minute\n    );\n    const seconds = Math.floor(\n      (((ms % UserTimer.#day) % UserTimer.#hour) % UserTimer.#minute) /\n        UserTimer.#second\n    );\n    return { days, hours, minutes, seconds };\n  }\n\n  static validateDate(date) {\n    return date - new Date() > 0 ? true : false;\n  }\n\n  startTimer(date, clearIntervalId) {\n    if (UserTimer.validateDate(date)) {\n      clearInterval(clearIntervalId);\n      document.querySelector('[data-start]').classList.remove('js-enabled');\n      document.querySelector('#datetime-picker').classList.add('js-disabled');\n      document.querySelector('#datetime-picker').disabled = true;\n      this.#intervalID = setInterval(\n        () => {\n          const timeDiff = date - new Date();\n          const timeRemaining = this.#convertMs(timeDiff);\n\n          document.querySelector('[data-days]').textContent = String(\n            timeRemaining.days\n          ).padStart(2, '0');\n          document.querySelector('[data-hours]').textContent = String(\n            timeRemaining.hours\n          ).padStart(2, '0');\n          document.querySelector('[data-minutes]').textContent = String(\n            timeRemaining.minutes\n          ).padStart(2, '0');\n          document.querySelector('[data-seconds]').textContent = String(\n            timeRemaining.seconds\n          ).padStart(2, '0');\n          if (!UserTimer.validateDate(date)) {\n            document.querySelector('#datetime-picker').disabled = false;\n            document\n              .querySelector('#datetime-picker')\n              .classList.remove('js-disabled');\n            this.#stopTimer(this.#intervalID);\n          }\n        },\n        1000,\n        date\n      );\n    }\n  }\n\n  #stopTimer(clearIntervalId) {\n    clearInterval(clearIntervalId);\n    document.querySelector('[data-days]').textContent = '00';\n    document.querySelector('[data-hours]').textContent = '00';\n    document.querySelector('[data-minutes]').textContent = '00';\n    document.querySelector('[data-seconds]').textContent = '00';\n  }\n}\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    const timer = new UserTimer(selectedDates[0]);\n    if (!UserTimer.validateDate(selectedDates[0])) {\n      izitoast.error();\n      return;\n    }\n    const isValidDate = setInterval(() => {\n      if (!UserTimer.validateDate(selectedDates[0])) {\n        document.querySelector('[data-start]').classList.remove('js-enabled');\n        document\n          .querySelector('[data-start]')\n          .addEventListener(\n            'click',\n            () => izitoast.error({ displayMode: 'once' }),\n            {\n              once: true,\n            }\n          );\n      } else {\n        document.querySelector('[data-start]').classList.add('js-enabled');\n        document.querySelector('[data-start]').addEventListener('click', () => {\n          timer.startTimer(selectedDates[0], isValidDate);\n        });\n      }\n    }, 1000);\n  },\n});\n"],"names":["_UserTimer","ms","__privateAdd","_convertMs","_stopTimer","_intervalID","date","clearIntervalId","__privateSet","timeDiff","timeRemaining","__privateMethod","convertMs_fn","stopTimer_fn","__privateGet","_second","_minute","_hour","_day","days","hours","minutes","seconds","UserTimer","flatpickr","selectedDates","timer","izitoast","isValidDate"],"mappings":"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"}