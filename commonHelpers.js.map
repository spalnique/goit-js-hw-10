{"version":3,"file":"commonHelpers.js","sources":["../src/img/izitoast-icon.svg","../src/js/1-timer.js"],"sourcesContent":["export default \"__VITE_ASSET__ee849f36__\"","import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport izitoast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorIcon from '../img/izitoast-icon.svg';\nimport closeIcon from '../img/izitoast-close.svg';\n\nconst userLinks = {\n  startButton: document.querySelector('[data-start]'),\n  input: document.querySelector('#datetime-picker'),\n  daysElement: document.querySelector('[data-days]'),\n  hoursElement: document.querySelector('[data-hours]'),\n  minutesElement: document.querySelector('[data-minutes]'),\n  secondsElement: document.querySelector('[data-seconds]'),\n};\n\nclass UserTimer {\n  static #second = 1000;\n  static #minute = UserTimer.#second * 60;\n  static #hour = UserTimer.#minute * 60;\n  static #day = UserTimer.#hour * 24;\n  #intervalID = null;\n\n  constructor(ms, paramsObject) {\n    this.hoursElement = paramsObject.hoursElement;\n    this.minutesElement = paramsObject.minutesElement;\n    this.secondsElement = paramsObject.secondsElement;\n    this.startButton = paramsObject.startButton;\n    this.input = paramsObject.input;\n    this.daysElement = paramsObject.daysElement;\n    this.days = ms.getDate() || 0;\n    this.hours = ms.getHours() || 0;\n    this.minutes = ms.getMinutes() || 0;\n    this.seconds = ms.getSeconds() || 0;\n  }\n\n  #convertMs(ms) {\n    const days = Math.floor(ms / UserTimer.#day);\n    const hours = Math.floor((ms % UserTimer.#day) / UserTimer.#hour);\n    const minutes = Math.floor(\n      ((ms % UserTimer.#day) % UserTimer.#hour) / UserTimer.#minute\n    );\n    const seconds = Math.floor(\n      (((ms % UserTimer.#day) % UserTimer.#hour) % UserTimer.#minute) /\n        UserTimer.#second\n    );\n    return { days, hours, minutes, seconds };\n  }\n\n  static isValidDate(date) {\n    return date - new Date() > 0 ? true : false;\n  }\n\n  static addLeadingZero(value) {\n    return value.padStart(2, '0');\n  }\n\n  startTimer(date) {\n    if (UserTimer.isValidDate(date)) {\n      this.startButton.classList.remove('js-enabled');\n      this.input.classList.add('js-disabled');\n      this.input.disabled = true;\n      this.#intervalID = setInterval(() => {\n        const timeDiff = date - new Date();\n        const timeRemaining = this.#convertMs(timeDiff);\n        console.log('tick');\n        this.daysElement.textContent = UserTimer.addLeadingZero(\n          String(timeRemaining.days)\n        );\n        this.hoursElement.textContent = UserTimer.addLeadingZero(\n          String(timeRemaining.hours)\n        );\n        this.minutesElement.textContent = UserTimer.addLeadingZero(\n          String(timeRemaining.minutes)\n        );\n        this.secondsElement.textContent = UserTimer.addLeadingZero(\n          String(timeRemaining.seconds)\n        );\n        if (!UserTimer.isValidDate(date)) {\n          this.input.disabled = false;\n          document\n            .querySelector('#datetime-picker')\n            .classList.remove('js-disabled');\n          this.#stopTimer();\n        }\n      }, 1000);\n    }\n  }\n\n  #stopTimer() {\n    clearInterval(this.#intervalID);\n    this.daysElement.textContent = '00';\n    this.hoursElement.textContent = '00';\n    this.minutesElement.textContent = '00';\n    this.secondsElement.textContent = '00';\n  }\n}\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose: onClose,\n});\n\nfunction onClose(selectedDates) {\n  console.log(selectedDates[0]);\n  const closeTimestamp = Date.now();\n  const timer = new UserTimer(selectedDates[0], userLinks);\n  if (!UserTimer.isValidDate(selectedDates[0])) {\n    showMessage('Please choose a date in the future');\n    return;\n  }\n  const timeoutID = setTimeout(() => {\n    timer.startButton.classList.remove('js-enabled');\n    timer.startButton.disabled = true;\n    showMessage('Selected date is not valid anymore');\n  }, selectedDates[0] - closeTimestamp);\n\n  if (UserTimer.isValidDate(selectedDates[0])) {\n    timer.startButton.classList.add('js-enabled');\n    timer.startButton.disabled = false;\n    timer.startButton.addEventListener('click', () => {\n      clearTimeout(timeoutID);\n      timer.startTimer(selectedDates[0]);\n    });\n  }\n}\n\nfunction showMessage(messageText) {\n  izitoast.show({\n    class: 'js-izitoast-message',\n    message: messageText,\n    messageColor: '#FFFFFF',\n    messageSize: '16px',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    progressBarColor: '#B51B1B',\n    iconUrl: errorIcon,\n    displayMode: 'replace',\n    close: false,\n    closeOnEscape: true,\n    pauseOnHover: false,\n  });\n}\n"],"names":["errorIcon","userLinks","_UserTimer","ms","paramsObject","__privateAdd","_convertMs","_stopTimer","_intervalID","date","value","__privateSet","timeDiff","timeRemaining","__privateMethod","convertMs_fn","stopTimer_fn","_second","_minute","_hour","_day","days","__privateGet","hours","minutes","seconds","UserTimer","flatpickr","onClose","selectedDates","closeTimestamp","timer","showMessage","timeoutID","messageText","izitoast"],"mappings":"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"}